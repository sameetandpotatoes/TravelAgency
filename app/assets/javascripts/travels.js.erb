$(document).ready(function(){
	$('.pk-selections').jScrollPane({showArrows: true,horizontalGutter: 10});
});

//Individual Activities Handler
$('.dest-activities input').change(function(e){
	//Loop through, add to sum price, add to night counter
	var sum = 0, nights = 0;
	var packages = "";
	//Sum prices and nights
	$('.dest-activities input').each(function(){
		var activity = this;
		if (activity.checked){
			sum += parseInt($(activity).attr("value"));
			nights += parseInt($(activity).attr("data-days"));
			if (activity.name == dest_1 && packages.indexOf(dest_1) < 0){
				packages = dest_1;
			} else if (activity.name == dest_2 && packages.indexOf(dest_2) < 0){
				packages += (packages == "") ? dest_2 : "," + dest_2;
			} else if (activity.name == dest_3 && packages.indexOf(dest_3) < 0){
				packages += (packages == "") ? dest_3 : "," + dest_3;
			}
		}
	});

	$('#total-price').text(sum);
	$('#estimated-days').text(nights + " nights");

	//Display relevant packages
	$('.package').each(function(){
		var dest = this;
		if ($(dest).attr("data-include") != packages && packages != ""){
			$(dest).fadeOut(500);
			// $(dest).css("display","none");
		} else{
			$(dest).fadeIn(500);
			$(dest).css("display","inline-block");
		}
	});
});

$('.flipper').click(function(e){
	$(e.currentTarget).toggleClass('flip');
});

//Currency Handler
$('.currency_input').bind('input', function() {
  var userinput = $(this).val();
  var conversion = parseInt($('#currencyRate').text());
  $('.currency_result').text(conversion * userinput);
});

//Social Handlers
$('.facebook-social').on('click', function(){
	FB.ui({
		method: 'share',
		href: 'http://www.toptiertraveling.com/',
	}, function(response){});
});

$('.twitter-social').on('click', function(){
	var text = document.title.split("| ")[1];
	window.open('https://twitter.com/intent/tweet?url=&text=' + text + '&via=toptiertravelin&hashtags=ThanksTTT', '_blank');
});

//Travel package selections min height adjustment
$('section.module.parallax').css("min-height",$(window).height() + 100);
$($('.module')[3]).css("min-height", $('.pk-selections').height() + 300);
$('.pk-selections').css("height",$('.chk-selections').height());
